<!doctype html>
<html lang="en">

<head data-th-replace="/fragments/head"></head>

<body>

<nav data-th-replace="/fragments/nav :: nav-admin"></nav>

<div class="container">

    <h1 class="display-2">Add a product</h1>
    <a href="/admin/products" class="btn btn-primary mb-5">Back to products</a>

    <div data-th-if="${message}" data-th-text="${message}" data-th-class="${'alert ' + alertClass}"></div>

    <form method="post" data-th-object="${product}" data-th-action="@{/admin/products/add}" enctype="multipart/form-data">

        <div data-th-if="${#fields.hasErrors('*')}" class="alert alert-danger">
            There are errors
        </div>

        <div class="form-group">
            <label for="">Name:</label>
            <input type="text" class="form-control" data-th-field="*{name}" placeholder="Name">
            <span class="error" data-th-if="${#fields.hasErrors('name')}" data-th-errors="*{name}"></span>
        </div>

        <div class="form-group">
            <label for="">Description:</label>
            <textarea data-th-field="*{description}" rows="10" class="form-control" placeholder="Description"></textarea>
            <span class="error" data-th-if="${#fields.hasErrors('description')}" data-th-errors="*{description}"></span>
        </div>

        <div class="form-group">
            <label for="">Image:</label>
            <input type="file" class="form-control" data-th-name="file" data-th-id="file">
            <img class="mt-2" src="#" alt="" id="imgPreview1">
        </div>

        <div class="form-group">
            <label for="">Price:</label>
            <input type="text" class="form-control" data-th-field="*{price}" placeholder="20 or 20.99">
            <span class="error" data-th-if="${#fields.hasErrors('price')}" data-th-errors="*{price}"></span>
        </div>

        <div class="form-group">
            <label for="">Category:</label>
            <select data-th-field="*{categoryId}" class="form-control">
                <option data-th-value="0">Choose a category</option>
                <option data-th-each="cat: ${categories}" data-th-value="${cat.id}" data-th-text="${cat.name}"></option>
            </select>
            <span class="error" data-th-if="${#fields.hasErrors('categoryId')}" data-th-errors="*{categoryId}"></span>
        </div>

        <button class="btn btn-danger mb-5">Add</button>

    </form>

</div>

<div data-th-replace="/fragments/footer"></div>

<script>

    $(function () {

        $("#file").change(function () {
            readURL(this, '1');
        });

    });

</script>

</body>

</html>
